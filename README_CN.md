# Sovereign-AI-Manifestos (v3.2)

欢迎使用 **Sovereign-AI-Manifestos** 仓库。本项目提供了一套完整的 AI 行为准则、技术规范与工作流，旨在提升大语言模型（如 Claude、GPT-4、Gemini）生成代码的可靠性、架构合理性与工程规范度。

默认情况下，大语言模型往往倾向于输出通用的样板代码，忽略边界条件，并且在超长上下文中难以维系一致的架构模式。本仓库通过提供清晰的、符合 RFC 2119 标准的规则协议，为 AI 设置了强制性的护栏与操作约束。

## 🏗️ 技能生态架构

本生态将软件工程的职责拆分为三个相互咬合的领域。当这些规则被加载到 AI Agent 框架中时，它们会强制大模型扮演特定的专家角色，而不是作为一个泛泛的编程助手。

### 1️⃣ 全栈产品指挥官 (Full-Stack Product Commander, FSPC)
**定位**：产品编排与交付管理
FSPC 充当总调度中枢，管理从需求收集到最终部署的完整生命周期。它通过强制的计划阶段来阻止 AI 过早地编写代码。

*   **战略智囊 (Strategic Advisory)**：根据明确的业务人设（初创创始人、增长黑客、企业级架构师），自适应地调整 AI 的技术决策，以匹配项目的规模和商业目标。
*   **业务脑拦截与 PRD 关卡**：要求用户必须先提供实质性的数据模型（至少 5 个核心实体）并确认产品需求文档（PRD），否则 AI 将拒绝生成脚手架。
*   **架构简报确认**：在编写任何实际代码前，AI 必须输出一页技术栈简报（Runtime、数据库、队列、认证方案），并等待用户的明确批准。
*   **量化质量门 (Quantitative Gates)**：集成了一个统一的 CLI 验证脚本 (`validate.js`)，严格校验 Lighthouse 性能分数、无障碍访问（A11y）标准、依赖包安全（`npm audit`）以及测试覆盖率。
*   **熔断器与主权切换 (Circuit Breaker & Sovereign Pivot)**：监控连续的构建或测试失败。与其陷入无意义的循环重试，AI 会主动中止操作，输出根本原因分析，并正式提出技术栈变更或降级策略。

### 2️⃣ 设计驱动前端宣言 (Design-Driven Frontend Manifesto, DDFM)
**定位**：UI/UX 工程与视觉一致性
DDFM 摒弃了零散的 CSS 工具类和随意的样式堆砌，为前端设计引入了严谨的、数学标准化的工作流。

*   **感知均匀色彩 (OKLCH)**：强制使用 OKLCH 色彩空间进行线性、可预测的对比度计算，从根本上消除了手动调整暗黑模式色值的需求。
*   **物理动效与防暴躁交互**：为弹簧动效（Spring Animations）定义了明确的参数（如 400/30）。包含识别用户 "Rage Clicks"（狂暴点击）的规则，并动态做出降速跟提示的响应。
*   **硬件感知降级 (Hardware-Aware Degradation)**：指导 AI 编写能检测低端硬件的逻辑，主动降级高开销的渲染效果（如复杂的 Backdrop-filter 或 3D 渲染），死守 60 FPS 的性能底线。
*   **状态机（XState）铁律**：当组件内部的状态组合超过 6 种时，禁止使用混乱的布尔值标识（如 `isLoading`, `hasError`），强制引入形式化的有限状态机来管理。
*   **设计偏移检测 (Design Drift Detection)**：强制 AI 在输出新组件时，对比其 CSS Token 与前三个已交付组件是否一致，以防止在漫长的开发会话中产生视觉风格的偏移。

### 3️⃣ API 驱动后端宣言 (API-Driven Backend Manifesto, ADBM)
**定位**：后端架构与企业级韧性
ADBM 确保生成的后端代码不仅是“能跑的”，而且从第一天起就具备处理高并发、分布式故障和严格安全要求的能耐。

*   **Saga 溯源与幂等性**：强制执行分布式事务补偿模式（如 Saga 模式），并要求在所有变更状态的接口上绑定 `Idempotency-Key` 请求头，防止重复处理。
*   **边缘优先与 mTLS**：在规划微服务架构时，自动建议注入 Sidecar 代理层和双向 TLS（mTLS）通信加密。
*   **死信队列治理 (DLQ Governance)**：为死信队列实施明确的路由和分类决策树，确保失败的异步任务被正确分流、监控和处理，而不是被静默丢弃。
*   **红蓝对抗级的供应链审计**：实施安全左移策略，在编写业务逻辑前强制执行依赖项漏洞扫描（如 `npm audit --json`），如果发现高危 CVE，则直接拦截代码生成。
*   **多模态架构解析 (Divine Interface)**：这是一个专属子协议，指导 AI 如何将用户上传的系统架构图（图片）、语音访谈文本或外部链接，原生转化为结构化的数据模型。

## ⚙️ 运行机制 (动态加载与继承)

这些文档不是简单的给人类阅读的 README，它们是专门针对 Agent 框架（如 Cline, Cursor 或定制的 MCP 服务）优化的系统级 Prompt。

1. **触发机制**：将这些文件夹放入您的 AI Prompt/技能目录。当您在对话中使用 `build app`, `create API` 或 `design system` 等唤醒词时，AI 的内部路由引擎会自动读取对应的 `SKILL.md` 文件。
2. **跨技能域继承**：FSPC 作为总入口，在它的 `PRE-FLIGHT` 阶段，会强制命令 AI 去读取 ADBM 和 DDFM 的文档，将后端协议和前端规范融合入当前的统一上下文中。
3. **Kickoff Card 确认面板**：加载完成后，AI 会在控制台强制输出一个格式化的 Markdown "Kickoff Card（启动卡片）"。该卡片会透明地向用户展示此时 AI 读取到的人设、合规层级和生效规则（例如：`[Scale: Growth | Compliance: GDPR]`），确保用户在执行前对大模型的内部状态有审查权。

## 🔄 生命周期及版本维护

为了防止这些规范因为前端/后端生态的快速演进而过时，这三份宣言内置了“演化触发器（Evolution Triggers）”。
其中最关键的 **Time-Based Decay** 规则命令 AI：*如果文档中引用的某个框架、工具或库的版本距离当前日期已超过 18 个月，AI 必须主动标记该规则为 `[STALE] (已过时)`，并向用户提交修订提案。*

## 📄 许可协议

本项目基于 MIT License 开源，详见 [LICENSE](LICENSE) 文件。
